function cov_pzgvvc9a5(){var path="C:\\Users\\danda\\OneDrive\\Desktop\\TP Danial\\Y2S2\\4.DVOP\\Projects\\DevOps-Project\\public\\js\\editBooking.js";var hash="a334e321280d26d9d95233fcf236296eda0e5b65";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\danda\\OneDrive\\Desktop\\TP Danial\\Y2S2\\4.DVOP\\Projects\\DevOps-Project\\public\\js\\editBooking.js",statementMap:{"0":{start:{line:2,column:18},end:{line:2,column:61}},"1":{start:{line:3,column:18},end:{line:3,column:37}},"2":{start:{line:6,column:0},end:{line:9,column:1}},"3":{start:{line:7,column:4},end:{line:7,column:59}},"4":{start:{line:8,column:4},end:{line:8,column:35}},"5":{start:{line:13,column:4},end:{line:22,column:5}},"6":{start:{line:14,column:25},end:{line:14,column:61}},"7":{start:{line:15,column:8},end:{line:17,column:9}},"8":{start:{line:16,column:12},end:{line:16,column:57}},"9":{start:{line:18,column:24},end:{line:18,column:45}},"10":{start:{line:19,column:8},end:{line:19,column:39}},"11":{start:{line:21,column:8},end:{line:21,column:66}},"12":{start:{line:27,column:4},end:{line:27,column:73}},"13":{start:{line:28,column:4},end:{line:28,column:57}},"14":{start:{line:29,column:4},end:{line:29,column:57}},"15":{start:{line:30,column:4},end:{line:30,column:69}},"16":{start:{line:31,column:4},end:{line:31,column:79}},"17":{start:{line:36,column:4},end:{line:36,column:27}},"18":{start:{line:38,column:22},end:{line:38,column:64}},"19":{start:{line:39,column:25},end:{line:39,column:70}},"20":{start:{line:40,column:17},end:{line:40,column:54}},"21":{start:{line:41,column:17},end:{line:41,column:54}},"22":{start:{line:42,column:27},end:{line:42,column:66}},"23":{start:{line:43,column:28},end:{line:43,column:76}},"24":{start:{line:46,column:24},end:{line:46,column:34}},"25":{start:{line:47,column:25},end:{line:47,column:39}},"26":{start:{line:50,column:4},end:{line:53,column:5}},"27":{start:{line:51,column:8},end:{line:51,column:56}},"28":{start:{line:52,column:8},end:{line:52,column:15}},"29":{start:{line:56,column:4},end:{line:59,column:5}},"30":{start:{line:57,column:8},end:{line:57,column:58}},"31":{start:{line:58,column:8},end:{line:58,column:15}},"32":{start:{line:62,column:27},end:{line:62,column:54}},"33":{start:{line:63,column:4},end:{line:66,column:5}},"34":{start:{line:64,column:8},end:{line:64,column:69}},"35":{start:{line:65,column:8},end:{line:65,column:15}},"36":{start:{line:68,column:24},end:{line:74,column:5}},"37":{start:{line:76,column:18},end:{line:76,column:38}},"38":{start:{line:77,column:4},end:{line:77,column:60}},"39":{start:{line:78,column:4},end:{line:78,column:65}},"40":{start:{line:80,column:4},end:{line:106,column:6}},"41":{start:{line:81,column:8},end:{line:105,column:9}},"42":{start:{line:82,column:12},end:{line:104,column:13}},"43":{start:{line:83,column:33},end:{line:83,column:65}},"44":{start:{line:84,column:16},end:{line:84,column:55}},"45":{start:{line:87,column:34},end:{line:87,column:77}},"46":{start:{line:88,column:16},end:{line:97,column:18}},"47":{start:{line:98,column:19},end:{line:104,column:13}},"48":{start:{line:99,column:16},end:{line:99,column:68}},"49":{start:{line:100,column:19},end:{line:104,column:13}},"50":{start:{line:101,column:16},end:{line:101,column:63}},"51":{start:{line:103,column:16},end:{line:103,column:66}},"52":{start:{line:108,column:4},end:{line:108,column:46}}},fnMap:{"0":{name:"fetchBookingDetails",decl:{start:{line:12,column:15},end:{line:12,column:34}},loc:{start:{line:12,column:46},end:{line:23,column:1}},line:12},"1":{name:"displayBookingDetails",decl:{start:{line:26,column:9},end:{line:26,column:30}},loc:{start:{line:26,column:40},end:{line:32,column:1}},line:26},"2":{name:"editBooking",decl:{start:{line:35,column:9},end:{line:35,column:20}},loc:{start:{line:35,column:28},end:{line:109,column:1}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:80,column:33},end:{line:80,column:34}},loc:{start:{line:80,column:45},end:{line:106,column:5}},line:80}},branchMap:{"0":{loc:{start:{line:6,column:0},end:{line:9,column:1}},type:"if",locations:[{start:{line:6,column:0},end:{line:9,column:1}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:6},"1":{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:15},"2":{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:50},"3":{loc:{start:{line:56,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:59,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:56},"4":{loc:{start:{line:63,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:66,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:63},"5":{loc:{start:{line:63,column:8},end:{line:63,column:61}},type:"binary-expr",locations:[{start:{line:63,column:8},end:{line:63,column:17}},{start:{line:63,column:21},end:{line:63,column:30}},{start:{line:63,column:35},end:{line:63,column:46}},{start:{line:63,column:50},end:{line:63,column:60}}],line:63},"6":{loc:{start:{line:81,column:8},end:{line:105,column:9}},type:"if",locations:[{start:{line:81,column:8},end:{line:105,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:81},"7":{loc:{start:{line:82,column:12},end:{line:104,column:13}},type:"if",locations:[{start:{line:82,column:12},end:{line:104,column:13}},{start:{line:98,column:19},end:{line:104,column:13}}],line:82},"8":{loc:{start:{line:98,column:19},end:{line:104,column:13}},type:"if",locations:[{start:{line:98,column:19},end:{line:104,column:13}},{start:{line:100,column:19},end:{line:104,column:13}}],line:98},"9":{loc:{start:{line:100,column:19},end:{line:104,column:13}},type:"if",locations:[{start:{line:100,column:19},end:{line:104,column:13}},{start:{line:102,column:19},end:{line:104,column:13}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a334e321280d26d9d95233fcf236296eda0e5b65"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_pzgvvc9a5=function(){return actualCoverage;};}return actualCoverage;}cov_pzgvvc9a5();// Get bookingId from the URL
const urlParams=(cov_pzgvvc9a5().s[0]++,new URLSearchParams(window.location.search));const bookingId=(cov_pzgvvc9a5().s[1]++,urlParams.get('id'));// Populate the Booking ID field if it's present in the URL
cov_pzgvvc9a5().s[2]++;if(bookingId){cov_pzgvvc9a5().b[0][0]++;cov_pzgvvc9a5().s[3]++;document.getElementById("bookingId").value=bookingId;cov_pzgvvc9a5().s[4]++;fetchBookingDetails(bookingId);}else{cov_pzgvvc9a5().b[0][1]++;}// Fetch the booking details using the booking ID
async function fetchBookingDetails(bookingId){cov_pzgvvc9a5().f[0]++;cov_pzgvvc9a5().s[5]++;try{const response=(cov_pzgvvc9a5().s[6]++,await fetch(`/booking/${bookingId}`));cov_pzgvvc9a5().s[7]++;if(!response.ok){cov_pzgvvc9a5().b[1][0]++;cov_pzgvvc9a5().s[8]++;throw new Error(`Error: ${response.status}`);}else{cov_pzgvvc9a5().b[1][1]++;}const booking=(cov_pzgvvc9a5().s[9]++,await response.json());cov_pzgvvc9a5().s[10]++;displayBookingDetails(booking);}catch(error){cov_pzgvvc9a5().s[11]++;alert(`Error fetching booking details: ${error.message}`);}}// Display booking details in the form fields
function displayBookingDetails(booking){cov_pzgvvc9a5().f[1]++;cov_pzgvvc9a5().s[12]++;document.getElementById("customerName").value=booking.customerName;cov_pzgvvc9a5().s[13]++;document.getElementById("date").value=booking.date;cov_pzgvvc9a5().s[14]++;document.getElementById("time").value=booking.time;cov_pzgvvc9a5().s[15]++;document.getElementById("guests").value=booking.numberOfGuests;cov_pzgvvc9a5().s[16]++;document.getElementById("specialRequests").value=booking.specialRequests;}// Function to handle the form submission
function editBooking(event){cov_pzgvvc9a5().f[2]++;cov_pzgvvc9a5().s[17]++;event.preventDefault();// Prevents page reload
const bookingId=(cov_pzgvvc9a5().s[18]++,document.getElementById("bookingId").value);const customerName=(cov_pzgvvc9a5().s[19]++,document.getElementById("customerName").value);const date=(cov_pzgvvc9a5().s[20]++,document.getElementById("date").value);const time=(cov_pzgvvc9a5().s[21]++,document.getElementById("time").value);const numberOfGuests=(cov_pzgvvc9a5().s[22]++,document.getElementById("guests").value);const specialRequests=(cov_pzgvvc9a5().s[23]++,document.getElementById("specialRequests").value);// Get current date
const currentDate=(cov_pzgvvc9a5().s[24]++,new Date());const selectedDate=(cov_pzgvvc9a5().s[25]++,new Date(date));// Limit the number of guests to 15
cov_pzgvvc9a5().s[26]++;if(numberOfGuests>15){cov_pzgvvc9a5().b[2][0]++;cov_pzgvvc9a5().s[27]++;alert("The number of guests cannot exceed 15.");cov_pzgvvc9a5().s[28]++;return;}else{cov_pzgvvc9a5().b[2][1]++;}// Ensure the selected date is not before the current date
cov_pzgvvc9a5().s[29]++;if(selectedDate<currentDate){cov_pzgvvc9a5().b[3][0]++;cov_pzgvvc9a5().s[30]++;alert("The booking date cannot be before today.");cov_pzgvvc9a5().s[31]++;return;}else{cov_pzgvvc9a5().b[3][1]++;}// Time validation to between 10am - 10pm
const[hour,minute]=(cov_pzgvvc9a5().s[32]++,time.split(':').map(Number));cov_pzgvvc9a5().s[33]++;if((cov_pzgvvc9a5().b[5][0]++,hour<10)||(cov_pzgvvc9a5().b[5][1]++,hour>22)||(cov_pzgvvc9a5().b[5][2]++,hour===22)&&(cov_pzgvvc9a5().b[5][3]++,minute>0)){cov_pzgvvc9a5().b[4][0]++;cov_pzgvvc9a5().s[34]++;alert("Please choose a time between 10:00 AM and 10:00 PM.");cov_pzgvvc9a5().s[35]++;return;}else{cov_pzgvvc9a5().b[4][1]++;}const bookingData=(cov_pzgvvc9a5().s[36]++,{customerName,date,time,numberOfGuests,specialRequests});var request=(cov_pzgvvc9a5().s[37]++,new XMLHttpRequest());cov_pzgvvc9a5().s[38]++;request.open("PUT",`/edit-booking/${bookingId}`,true);cov_pzgvvc9a5().s[39]++;request.setRequestHeader('Content-Type','application/json');cov_pzgvvc9a5().s[40]++;request.onreadystatechange=function(){cov_pzgvvc9a5().f[3]++;cov_pzgvvc9a5().s[41]++;if(request.readyState===4){cov_pzgvvc9a5().b[6][0]++;cov_pzgvvc9a5().s[42]++;if(request.status===200){cov_pzgvvc9a5().b[7][0]++;const response=(cov_pzgvvc9a5().s[43]++,JSON.parse(request.responseText));cov_pzgvvc9a5().s[44]++;alert("Booking updated successfully!");// Insert the updated booking details into the table
const tableBody=(cov_pzgvvc9a5().s[45]++,document.getElementById("bookingTableBody"));cov_pzgvvc9a5().s[46]++;tableBody.innerHTML=`
                    <tr>
                        <td>${response.updatedBooking._id}</td>
                        <td>${response.updatedBooking.customerName}</td>
                        <td>${response.updatedBooking.date}</td>
                        <td>${response.updatedBooking.time}</td>
                        <td>${response.updatedBooking.numberOfGuests}</td>
                        <td>${response.updatedBooking.specialRequests}</td>
                    </tr>
                `;}else{cov_pzgvvc9a5().b[7][1]++;cov_pzgvvc9a5().s[47]++;if(request.status===400){cov_pzgvvc9a5().b[8][0]++;cov_pzgvvc9a5().s[48]++;alert("Bad Request: Please check your input data.");}else{cov_pzgvvc9a5().b[8][1]++;cov_pzgvvc9a5().s[49]++;if(request.status===500){cov_pzgvvc9a5().b[9][0]++;cov_pzgvvc9a5().s[50]++;alert("Server Error: Please try again later.");}else{cov_pzgvvc9a5().b[9][1]++;cov_pzgvvc9a5().s[51]++;alert("An error occurred: "+request.statusText);}}}}else{cov_pzgvvc9a5().b[6][1]++;}};cov_pzgvvc9a5().s[52]++;request.send(JSON.stringify(bookingData));}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfcHpndnZjOWE1IiwiYWN0dWFsQ292ZXJhZ2UiLCJ1cmxQYXJhbXMiLCJzIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJib29raW5nSWQiLCJnZXQiLCJiIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiZmV0Y2hCb29raW5nRGV0YWlscyIsImYiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInN0YXR1cyIsImJvb2tpbmciLCJqc29uIiwiZGlzcGxheUJvb2tpbmdEZXRhaWxzIiwiZXJyb3IiLCJhbGVydCIsIm1lc3NhZ2UiLCJjdXN0b21lck5hbWUiLCJkYXRlIiwidGltZSIsIm51bWJlck9mR3Vlc3RzIiwic3BlY2lhbFJlcXVlc3RzIiwiZWRpdEJvb2tpbmciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudERhdGUiLCJEYXRlIiwic2VsZWN0ZWREYXRlIiwiaG91ciIsIm1pbnV0ZSIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiYm9va2luZ0RhdGEiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJ0YWJsZUJvZHkiLCJpbm5lckhUTUwiLCJ1cGRhdGVkQm9va2luZyIsIl9pZCIsInN0YXR1c1RleHQiLCJzZW5kIiwic3RyaW5naWZ5Il0sInNvdXJjZXMiOlsiZWRpdEJvb2tpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2V0IGJvb2tpbmdJZCBmcm9tIHRoZSBVUkxcclxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuY29uc3QgYm9va2luZ0lkID0gdXJsUGFyYW1zLmdldCgnaWQnKTtcclxuXHJcbi8vIFBvcHVsYXRlIHRoZSBCb29raW5nIElEIGZpZWxkIGlmIGl0J3MgcHJlc2VudCBpbiB0aGUgVVJMXHJcbmlmIChib29raW5nSWQpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9va2luZ0lkXCIpLnZhbHVlID0gYm9va2luZ0lkO1xyXG4gICAgZmV0Y2hCb29raW5nRGV0YWlscyhib29raW5nSWQpO1xyXG59XHJcblxyXG4vLyBGZXRjaCB0aGUgYm9va2luZyBkZXRhaWxzIHVzaW5nIHRoZSBib29raW5nIElEXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoQm9va2luZ0RldGFpbHMoYm9va2luZ0lkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9ib29raW5nLyR7Ym9va2luZ0lkfWApO1xyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJvb2tpbmcgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgZGlzcGxheUJvb2tpbmdEZXRhaWxzKGJvb2tpbmcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBhbGVydChgRXJyb3IgZmV0Y2hpbmcgYm9va2luZyBkZXRhaWxzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIERpc3BsYXkgYm9va2luZyBkZXRhaWxzIGluIHRoZSBmb3JtIGZpZWxkc1xyXG5mdW5jdGlvbiBkaXNwbGF5Qm9va2luZ0RldGFpbHMoYm9va2luZykge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXN0b21lck5hbWVcIikudmFsdWUgPSBib29raW5nLmN1c3RvbWVyTmFtZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZVwiKS52YWx1ZSA9IGJvb2tpbmcuZGF0ZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZVwiKS52YWx1ZSA9IGJvb2tpbmcudGltZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3Vlc3RzXCIpLnZhbHVlID0gYm9va2luZy5udW1iZXJPZkd1ZXN0cztcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3BlY2lhbFJlcXVlc3RzXCIpLnZhbHVlID0gYm9va2luZy5zcGVjaWFsUmVxdWVzdHM7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgZm9ybSBzdWJtaXNzaW9uXHJcbmZ1bmN0aW9uIGVkaXRCb29raW5nKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAgLy8gUHJldmVudHMgcGFnZSByZWxvYWRcclxuXHJcbiAgICBjb25zdCBib29raW5nSWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvb2tpbmdJZFwiKS52YWx1ZTtcclxuICAgIGNvbnN0IGN1c3RvbWVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VzdG9tZXJOYW1lXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZVwiKS52YWx1ZTtcclxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVcIikudmFsdWU7XHJcbiAgICBjb25zdCBudW1iZXJPZkd1ZXN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3Vlc3RzXCIpLnZhbHVlO1xyXG4gICAgY29uc3Qgc3BlY2lhbFJlcXVlc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGVjaWFsUmVxdWVzdHNcIikudmFsdWU7XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgZGF0ZVxyXG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcblxyXG4gICAgLy8gTGltaXQgdGhlIG51bWJlciBvZiBndWVzdHMgdG8gMTVcclxuICAgIGlmIChudW1iZXJPZkd1ZXN0cyA+IDE1KSB7XHJcbiAgICAgICAgYWxlcnQoXCJUaGUgbnVtYmVyIG9mIGd1ZXN0cyBjYW5ub3QgZXhjZWVkIDE1LlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5zdXJlIHRoZSBzZWxlY3RlZCBkYXRlIGlzIG5vdCBiZWZvcmUgdGhlIGN1cnJlbnQgZGF0ZVxyXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSA8IGN1cnJlbnREYXRlKSB7XHJcbiAgICAgICAgYWxlcnQoXCJUaGUgYm9va2luZyBkYXRlIGNhbm5vdCBiZSBiZWZvcmUgdG9kYXkuXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaW1lIHZhbGlkYXRpb24gdG8gYmV0d2VlbiAxMGFtIC0gMTBwbVxyXG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSB0aW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XHJcbiAgICBpZiAoaG91ciA8IDEwIHx8IGhvdXIgPiAyMiB8fCAoaG91ciA9PT0gMjIgJiYgbWludXRlID4gMCkpIHtcclxuICAgICAgICBhbGVydChcIlBsZWFzZSBjaG9vc2UgYSB0aW1lIGJldHdlZW4gMTA6MDAgQU0gYW5kIDEwOjAwIFBNLlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9va2luZ0RhdGEgPSB7XHJcbiAgICAgICAgY3VzdG9tZXJOYW1lLFxyXG4gICAgICAgIGRhdGUsXHJcbiAgICAgICAgdGltZSxcclxuICAgICAgICBudW1iZXJPZkd1ZXN0cyxcclxuICAgICAgICBzcGVjaWFsUmVxdWVzdHNcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHJlcXVlc3Qub3BlbihcIlBVVFwiLCBgL2VkaXQtYm9va2luZy8ke2Jvb2tpbmdJZH1gLCB0cnVlKTtcclxuICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuXHJcbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJCb29raW5nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIHVwZGF0ZWQgYm9va2luZyBkZXRhaWxzIGludG8gdGhlIHRhYmxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvb2tpbmdUYWJsZUJvZHlcIik7XHJcbiAgICAgICAgICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmVzcG9uc2UudXBkYXRlZEJvb2tpbmcuX2lkfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke3Jlc3BvbnNlLnVwZGF0ZWRCb29raW5nLmN1c3RvbWVyTmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZXNwb25zZS51cGRhdGVkQm9va2luZy5kYXRlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke3Jlc3BvbnNlLnVwZGF0ZWRCb29raW5nLnRpbWV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmVzcG9uc2UudXBkYXRlZEJvb2tpbmcubnVtYmVyT2ZHdWVzdHN9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmVzcG9uc2UudXBkYXRlZEJvb2tpbmcuc3BlY2lhbFJlcXVlc3RzfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJCYWQgUmVxdWVzdDogUGxlYXNlIGNoZWNrIHlvdXIgaW5wdXQgZGF0YS5cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJTZXJ2ZXIgRXJyb3I6IFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZDogXCIgKyByZXF1ZXN0LnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXF1ZXN0LnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9va2luZ0RhdGEpKTtcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiaTJOQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaO0FBQ0EsS0FBTSxDQUFBRSxTQUFTLEVBQUFGLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEdBQUksQ0FBQUMsZUFBZSxDQUFDQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLEVBQzdELEtBQU0sQ0FBQUMsU0FBUyxFQUFBUixhQUFBLEdBQUFHLENBQUEsTUFBR0QsU0FBUyxD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